<html>
    <head>
        <title>Display Config</title>
        <script src="/js/zepto.min.js"></script>
        <link rel="icon" href="data:,">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <style>
          body {font-family: sans-serif;}
        
          input:not([type='checkbox']) {
            width: 400px;
            margin-left:10px;
            font-family: monospace;
          }
        </style>
    </head>
    <body>
        <H1>Display Config</H1>
        <a href="/">Home</a><br><br>
        <div id="configparams">
          <div id="loading">Loading...</div>
          <form action="/config_save" method="POST" id="settingsform" style="display:none;">
            Display 0: <input name="disp0" id="disp0"/><br>
            Display 1: <input name="disp1" id="disp1"/><br>
            Display 2: <input name="disp2" id="disp2"/><br>
            Display 3: <input name="disp3" id="disp3"/><br>
            <!-- Display Off: <input name="dispOff" id="dispOff"/><br>-->
            <br>
            <button type="submit">Save</button>
          </form>
        </div>
        <script>
          function initialLoad() {
            $.get('/config_update', function(response){
              populateValues(response);
            });
          }

          function populateValues(data) {
            if ("displaysettings" in data) {
              Object.keys(data.displaysettings).forEach((k, i) => {
                $foundInput = $('input#' + k);
                $foundInput.val(data.displaysettings[k]);
              });
              
              $('div#loading').hide();
              $('form#settingsform').show();
            }
          }

          initialLoad();
        </script>
    </body>
</html>