<html>
    <head>
        <title>Network Config</title>
        <script src="/js/zepto.min.js"></script>
        <link rel="icon" href="data:,">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <style>body {font-family: sans-serif;}</style>
    </head>
    <body>
        <H1>Network Config</H1>
        <a href="/">Home</a><br><br>
        <div id="networkparams">
          <div id="loading">Loading...</div>
          <form action="/network_save" method="POST" id="settingsform" style="display:none;">
            External SSID: <input name="ssid" id="ssid"/> *To disable external wifi connectivity just make sure this box is empty<br>
            External Password: <input name="password" id="password"/> *saved password isn't displayed.  If you leave it empty and hit save it will be removed<br>
            <br>
            <button type="submit">Save</button>
          </form>
        </div>
        <script>
          function initialLoad() {
            $.get('/network_update', function(response){
              populateValues(response);
            });
          }

          function populateValues(data) {
            if ("networksettings" in data) {
              Object.keys(data.networksettings).forEach((k, i) => {
                $foundInput = $('input#' + k);
                $foundInput.val(data.networksettings[k]);
              });
              
              $('div#loading').hide();
              $('form#settingsform').show();
            }
          }

          initialLoad();
        </script>
    </body>
</html>